/* ── Reset ─────────────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }

/* ── Full-screen root ──────────────────────────────────────────────────── */
.app-root {
  display: grid;
  grid-template-rows: auto 1fr;
  height: 100vh;
  overflow: hidden;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
}

/* ── Header ────────────────────────────────────────────────────────────── */
.site-header {
  background: #080a10;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  padding: 12px 20px;
  z-index: 200;
}

/* ── Body grid: sidebar | main ─────────────────────────────────────────── */
.app-body {
  display: grid;
  grid-template-columns: 200px 1fr;
  overflow: hidden;
}

/* ── Main scrollable area ───────────────────────────────────────────────── */
.main-content {
  overflow-y: auto;
  padding: 20px;
  background: #0b0d14;
  display: flex;
  flex-direction: column;
}

/* ── Two-column row (both stretch to same height) ───────────────────────── */
.tab-panels-row {
  display: flex;
  gap: 1.5rem;
  align-items: stretch;
  flex: 1;
}

/* ── Left column: tab switcher + form ───────────────────────────────────── */
.left-col {
  flex: 0 0 540px;
  display: flex;
  flex-direction: column;
}

/* form-stretch: the Paper/form fills remaining left-col height */
.form-stretch {
  flex: 1;
  display: flex;
  flex-direction: column;
}
.form-stretch > * {
  flex: 1;
  height: 100%;
}

/* ── Right column ───────────────────────────────────────────────────────── */
.right-col {
  flex: 1 1 400px;
  min-width: 0;
  display: flex;
  flex-direction: column;
}


/* ── Sidebar ───────────────────────────────────────────────────────────── */
.sidebar {
  background: #060810;
  border-right: 1px solid rgba(255, 255, 255, 0.07);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.sidebar-brand {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px;
}
.sidebar-nav {
  padding: 14px 12px;
  flex: 1;
}
.sidebar-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.15s;
  color: var(--mantine-color-dark-2);
  user-select: none;
}
.sidebar-item:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--mantine-color-dark-0);
}
.sidebar-item-active {
  background: rgba(99, 102, 241, 0.14);
  color: #a5b4fc;
}
.sidebar-item-active:hover {
  background: rgba(99, 102, 241, 0.2);
}
.sidebar-stat {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 6px;
}
.sidebar-footer {
  padding: 14px 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}

/* ── Content panels ────────────────────────────────────────────────────── */
.panel {
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
}
.panel-left {
  border-right: 1px solid rgba(255, 255, 255, 0.06);
  background: #080a10;
}
.panel-right {
  background: #0b0d14;
}

/* ── Panel empty state ─────────────────────────────────────────────────── */
.panel-empty {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 40px 20px;
}
.empty-icon-wrap {
  width: 56px;
  height: 56px;
  border-radius: 14px;
  background: rgba(99, 102, 241, 0.1);
  border: 1px solid rgba(99, 102, 241, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ── Native date / time inputs ─────────────────────────────────────────── */
.native-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  font-weight: 500;
  color: var(--mantine-color-dark-0);
  margin-bottom: 5px;
}
.native-label svg { color: var(--mantine-color-dark-2); flex-shrink: 0; }

.native-input {
  width: 100%;
  height: 36px;
  background: var(--mantine-color-dark-6);
  border: 1px solid var(--mantine-color-dark-4);
  border-radius: 6px;
  color: var(--mantine-color-dark-0);
  padding: 0 12px;
  font-size: 14px;
  font-family: 'Inter', system-ui, sans-serif;
  outline: none;
  transition: border-color 0.15s;
  cursor: pointer;
}
.native-input:focus { border-color: var(--mantine-color-indigo-5); }
.native-input::-webkit-calendar-picker-indicator { filter: invert(0.55); cursor: pointer; }

/* ── Journey pill ──────────────────────────────────────────────────────── */
.journey-pill {
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(99, 102, 241, 0.08);
  border: 1px solid rgba(99, 102, 241, 0.2);
  border-radius: 8px;
  padding: 12px 16px;
  font-size: 13px;
  color: var(--mantine-color-dark-1);
  margin-top: 10px;
}

/* ── Arrival time timeline ─────────────────────────────────────────────── */
.timeline-wrap {
  display: flex;
  align-items: center;
  gap: 0;
  margin: 20px 0 4px;
  padding: 16px 20px;
  background: var(--mantine-color-dark-7);
  border: 1px solid var(--mantine-color-dark-4);
  border-radius: 10px;
}
.tl-node {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  flex-shrink: 0;
}
.tl-icon-wrap {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.tl-depart { background: rgba(99,102,241,0.15); border: 1.5px solid rgba(99,102,241,0.4); color: #818cf8; }
.tl-sched  { background: rgba(107,114,153,0.15); border: 1.5px solid rgba(107,114,153,0.4); color: #6b7a99; }
.tl-est-on-time  { background: rgba(34,197,94,0.15);  border: 1.5px solid rgba(34,197,94,0.4);  color: #22c55e; }
.tl-est-slightly { background: rgba(245,158,11,0.15); border: 1.5px solid rgba(245,158,11,0.4); color: #f59e0b; }
.tl-est-heavily  { background: rgba(239,68,68,0.15);  border: 1.5px solid rgba(239,68,68,0.4);  color: #ef4444; }

.tl-time {
  font-size: 1rem;
  font-weight: 700;
  color: var(--mantine-color-dark-0);
  line-height: 1;
  white-space: nowrap;
}
.tl-time-est { font-size: 1.05rem; }
.tl-label {
  font-size: 0.7rem;
  color: var(--mantine-color-dark-2);
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 4px;
}
.tl-tag {
  font-size: 0.62rem;
  padding: 1px 5px;
  border-radius: 4px;
  font-weight: 600;
}
.tl-tag-warn { background: rgba(245,158,11,0.15); color: #f59e0b; }

.tl-line {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 0 6px;
  min-width: 0;
}
.tl-line-inner {
  width: 100%;
  height: 2px;
  background: rgba(99,102,241,0.3);
  border-radius: 1px;
}
.tl-line-delay { background: rgba(245,158,11,0.35); }
.tl-dur {
  font-size: 0.67rem;
  color: var(--mantine-color-dark-3);
  white-space: nowrap;
}
.tl-dur-delay { color: #f59e0b; }

/* ── Result banner ─────────────────────────────────────────────────────── */
.result-banner {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 18px 20px;
  border-radius: 10px;
  border: 1px solid transparent;
}
.result-banner.on-time  { background: rgba(34, 197, 94, 0.1);  border-color: rgba(34, 197, 94, 0.3);  }
.result-banner.slightly { background: rgba(245, 158, 11, 0.1); border-color: rgba(245, 158, 11, 0.3); }
.result-banner.heavily  { background: rgba(239, 68, 68, 0.1);  border-color: rgba(239, 68, 68, 0.3);  }

/* ── Probability grid ──────────────────────────────────────────────────── */
.prob-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-top: 14px;
}
.prob-card {
  text-align: center;
  padding: 14px 8px;
  border-radius: 8px;
  border: 1px solid var(--mantine-color-dark-4);
  background: var(--mantine-color-dark-7);
  transition: border-color 0.2s, background 0.2s;
}
.prob-card.active-0 { border-color: rgba(34, 197, 94, 0.55);  background: rgba(34, 197, 94, 0.07);  }
.prob-card.active-1 { border-color: rgba(245, 158, 11, 0.55); background: rgba(245, 158, 11, 0.07); }
.prob-card.active-2 { border-color: rgba(239, 68, 68, 0.55);  background: rgba(239, 68, 68, 0.07);  }
.prob-pct     { font-size: 1.45rem; font-weight: 700; line-height: 1; }
.prob-pct.c-0 { color: #22c55e; }
.prob-pct.c-1 { color: #f59e0b; }
.prob-pct.c-2 { color: #ef4444; }
.prob-name    { font-size: 0.71rem; color: var(--mantine-color-dark-2); margin-top: 5px; font-weight: 500; }

/* ── Factors list ──────────────────────────────────────────────────────── */
.factors-list { list-style: none; margin-top: 6px; padding: 0; }
.factors-list li {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 7px 0;
  font-size: 0.85rem;
  color: var(--mantine-color-dark-1);
  border-bottom: 1px solid var(--mantine-color-dark-5);
}
.factors-list li:last-child { border-bottom: none; }

/* ── SHAP tooltip ──────────────────────────────────────────────────────── */
.shap-tooltip {
  background: var(--mantine-color-dark-7);
  border: 1px solid var(--mantine-color-dark-4);
  border-radius: 8px;
  padding: 10px 14px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.55);
  font-family: 'Inter', system-ui, sans-serif;
  min-width: 160px;
}

/* ── Mobile ────────────────────────────────────────────────────────────── */
@media (max-width: 960px) {
  .app-root  { height: auto; overflow: visible; }
  .app-body  { grid-template-columns: 1fr; overflow: visible; height: auto; }
  .sidebar   { flex-direction: row; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.06); overflow-x: auto; }
  .sidebar-brand { border-right: 1px solid rgba(255,255,255,0.06); }
  .sidebar-nav   { flex-direction: row; flex: unset; padding: 8px; }
  .sidebar-footer { display: none; }
  .panel     { overflow-y: visible; padding: 16px; }
  .panel-left { border-right: none; border-bottom: 1px solid rgba(255,255,255,0.06); }
  .panel-empty  { min-height: 200px; flex: none; }
  .prob-grid    { gap: 7px; }
  .prob-pct     { font-size: 1.15rem; }
  .result-banner { padding: 14px 16px; gap: 12px; }
}
